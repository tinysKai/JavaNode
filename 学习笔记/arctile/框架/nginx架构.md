#### nginx的运行方式 : 事件处理机制 + 进程模型
通过异步非阻塞的事件处理机制，Nginx实现由进程循环处理多个准备好的事件，从而实现高并发和轻量级。

#### nginx内部进程模型
![b+tree](https://github.com/tinysKai/Note/blob/master/image/article/2018/0709/nginx.jpg)  
master的职责
+ 接收外部事件,向worker分派任务
+ 监控,管理worker

#### 异步非阻塞的事件处理机制
提供了一种机制，让你可以同时监控多个事件，调用他们是阻塞的，但可以设置超时时间，在超时时间之内 ，如果有事件准备好了，就返回。  
  
以epoll为例：当事件没有准备好时，就放入epoll(队列)里面。如果有事件准备好了，那么就去处理；如果事件返回的是EAGAIN，那么继续将其放入epoll里面。  
从而，只要有事件准备好了，我们就去处理她，只有当所有事件都没有准备好时，才在epoll里面等着。  
这样，我们就可以并发处理大量的并发了，当然，这里的并发请求，是指未处理完的请求，线程只有一个，所以同时能处理的请求当然只有一个了，只是在请求间进行不断地切换而已，切换也是因为异步事件未准备好，而主动让出的。  
这里的切换是没有任何代价，你可以理解为循环处理多个准备好的事件，事实上就是这样的。 


#### 与多线程的比较
 与多线程相比，这种事件处理方式是有很大的优势的，不需要创建线程，每个请求占用的内存也很少，没有上下文切换，事件处理非常的轻量级。  
 并发数再多也不会导致无谓的资源浪费（上下文切换）。
 
*https://blog.csdn.net/damys/article/details/45022441*